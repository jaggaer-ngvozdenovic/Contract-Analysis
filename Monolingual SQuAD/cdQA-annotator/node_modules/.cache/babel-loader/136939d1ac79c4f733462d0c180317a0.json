{"remainingRequest":"/home/nikola/CODES/cdQA-annotator/node_modules/babel-loader/lib/index.js!/home/nikola/CODES/cdQA-annotator/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nikola/CODES/cdQA-annotator/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nikola/CODES/cdQA-annotator/src/components/AnnotationsPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nikola/CODES/cdQA-annotator/src/components/AnnotationsPage.vue","mtime":1621934065708},{"path":"/home/nikola/CODES/cdQA-annotator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nikola/CODES/cdQA-annotator/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nikola/CODES/cdQA-annotator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nikola/CODES/cdQA-annotator/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport _JSON$stringify from \"/home/nikola/CODES/cdQA-annotator/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.regexp.replace\";\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar uuidv4 = require('uuid/v4');\n\nexport default {\n  name: \"AnnotationsPage\",\n  props: [\"json\"],\n  data: function data() {\n    return {\n      data_number: 1,\n      context_number: 1,\n      question: \"\",\n      answer: \"\",\n      fields: [\"Questions\", \"Answers\", \"Edit\"],\n      query: \"\"\n    };\n  },\n  methods: {\n    addAnnotation: function addAnnotation() {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[this.context_number - 1];\n      var qa = {\n        question: this.question,\n        id: uuidv4(),\n        answers: [{\n          answer_start: this.answer_start,\n          text: this.answer\n        }]\n      };\n      paragraph_container.qas.push(qa);\n      this.question = \"\";\n      this.answer = \"\";\n    },\n    deleteAnnotation: function deleteAnnotation(row_index) {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[this.context_number - 1];\n      paragraph_container.qas.splice(row_index, 1);\n    },\n    getSelection: function getSelection(fixStr) {\n      this.answer = fixStr;\n    },\n    delete_paragraph: function delete_paragraph() {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs;\n      paragraph_container.splice([this.context_number - 1], 1);\n    },\n    delete_empty_document: function delete_empty_document() {\n      for (var i in this.json.data) {\n        if (this.json.data[i].paragraphs.length == 0) {\n          this.json.data.splice(i, 1);\n        }\n      }\n    }\n  },\n  computed: {\n    valid_json: function valid_json() {\n      var json = _JSON$stringify(this.json).replace(/[\\u007F-\\uFFFF]/g, function (chr) {\n        return \"\\\\u\" + (\"0000\" + chr.charCodeAt(0).toString(16)).substr(-4);\n      });\n\n      return json;\n    },\n    autocomplete: function autocomplete() {\n      var idx = [];\n\n      for (var i = 0; i < this.json.data.length; i++) {\n        idx.push(this.json.data[i].title);\n      }\n\n      return idx;\n    },\n    items: function items() {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[this.context_number - 1];\n      var items = [];\n\n      for (var i = 0; i < paragraph_container.qas.length; i++) {\n        var item = {\n          Questions: paragraph_container.qas[i].question,\n          Answers: paragraph_container.qas[i].answers[0].text\n        };\n        items.push(item);\n      }\n\n      return items;\n    },\n    paragraph_context: function paragraph_context() {\n      return this.json.data[this.data_number - 1].paragraphs[this.context_number - 1].context;\n    },\n    answer_start: function answer_start() {\n      return this.paragraph_context.indexOf(this.answer);\n    },\n    options: function options() {\n      return {\n        radius: 15,\n        circleLineCap: \"round\",\n        varyStrokeArray: [1, 2],\n        pathColors: [\"lightgrey\", \"rgb(40, 167, 69)\"],\n        text: function text(value) {\n          return this.htmlifyNumber(value) + '<span style=\"font-size: 1em;\">%</span>';\n        },\n        textColor: \"black\"\n      };\n    }\n  }\n};",{"version":3,"sources":["AnnotationsPage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"AnnotationsPage container mt-3\">\n    <div>\n      <b-navbar sticky toggleable=\"lg\" class=\"pl-0\">\n        <b-navbar-brand>cdQA-annotator</b-navbar-brand>\n\n        <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\n\n        <b-collapse id=\"nav-collapse\" is-nav>\n          <!-- Right aligned nav items -->\n          <b-navbar-nav class=\"ml-auto\">\n            <b-nav-item>\n              <svg-progress-bar :value=\"data_number / json.data.length * 100\" :options=\"options\"></svg-progress-bar>\n            </b-nav-item>\n            <b-nav-form>\n              <vue-bootstrap-typeahead\n                size=\"sm\"\n                v-model=\"query\"\n                :data=\"autocomplete\"\n                placeholder=\"Search a document...\"\n                @hit=\"data_number = autocomplete.indexOf($event) + 1; context_number = 1\"\n              />\n            </b-nav-form>\n            <b-nav-item right>\n              <b-button\n                :size=\"'sm'\"\n                :variant=\"'primary'\"\n                v-on:click=\"delete_empty_document()\"\n                v-download-data=\"valid_json\"\n                v-download-data:type=\"'json'\"\n                v-download-data:filename=\"'cdqa-v1.1.json'\"\n              >Download</b-button>\n            </b-nav-item>\n          </b-navbar-nav>\n        </b-collapse>\n      </b-navbar>\n    </div>\n    <br>\n    <div v-if=\"data_number - 1 < json.data.length\">\n      <h2>{{ json.data[data_number - 1].title }}</h2>\n      <span\n        class=\"text-muted\"\n      >Paragraph {{ context_number }} of {{ json.data[data_number - 1].paragraphs.length }} | Document {{ data_number }} of {{ json.data.length }}</span>\n      <br>\n      <br>\n      <p ref=\"paragraph\" v-selection.fix=\"{getSelection:getSelection}\">{{ paragraph_context }}</p>\n      <br>\n\n      <b-form-input v-model=\"question\" type=\"text\" placeholder=\"Type question here...\"></b-form-input>\n      <br>\n\n      <b-form-input v-model=\"answer\" type=\"text\" placeholder=\"Type answer here...\"></b-form-input>\n      <br>\n\n      <b-button :size=\"''\" :variant=\"'secondary'\" v-on:click=\"addAnnotation()\">Add annotation</b-button> or \n      <b-button\n        v-if=\"context_number < json.data[data_number - 1].paragraphs.length\"\n        :size=\"''\"\n        :variant=\"'danger'\"\n        v-on:click=\"delete_paragraph()\"\n      >Delete paragraph</b-button>\n      <b-button\n        v-else\n        :size=\"''\"\n        :variant=\"'danger'\"\n        v-on:click=\"delete_paragraph(), data_number += 1, context_number = 1\"\n      >Delete paragraph</b-button>\n      <br>\n      <br>\n\n      <b-table striped hover :items=\"items\" :fields=\"fields\">\n        <template slot=\"Edit\" slot-scope=\"row\">\n          <b-button :size=\"''\" :variant=\"'danger'\" @click.stop=\"deleteAnnotation(row.index)\">Delete</b-button>\n        </template>\n      </b-table>\n      <br>\n\n      <div v-if=\"data_number > 1 && context_number == 1\">\n        <b-button\n          :size=\"''\"\n          :variant=\"'outline-secondary'\"\n          v-on:click=\"data_number -= 1, context_number = json.data[data_number - 1].paragraphs.length\"\n        >Previous</b-button> or \n        <b-button :size=\"''\" :variant=\"'outline-primary'\" v-on:click=\"context_number += 1\">Next</b-button>\n      </div>\n      <div v-else-if=\"context_number < json.data[data_number - 1].paragraphs.length\">\n        <b-button\n          :size=\"''\"\n          :variant=\"'outline-secondary'\"\n          v-on:click=\"context_number -= 1\"\n        >Previous</b-button> or \n        <b-button :size=\"''\" :variant=\"'outline-primary'\" v-on:click=\"context_number += 1\">Next</b-button>\n      </div>\n      <div v-else>\n        <b-button\n          :size=\"''\"\n          :variant=\"'outline-secondary'\"\n          v-on:click=\"context_number -= 1\"\n        >Previous</b-button> or \n        <b-button\n          :size=\"''\"\n          :variant=\"'outline-primary'\"\n          v-on:click=\"data_number += 1, context_number = 1\"\n        >Next</b-button>\n      </div>\n      <br>\n      <br>\n    </div>\n    <div v-else>\n      There are no more data to annotate. You can now download your annotated dataset\n      <img\n        src=\"../assets/ablobmaracas.gif\"\n        height=\"30\"\n        width=\"30\"\n      >\n      <br>\n      <br>\n      <b-button\n        :size=\"''\"\n        :variant=\"'primary'\"\n        v-on:click=\"delete_empty_document()\"\n        v-download-data=\"valid_json\"\n        v-download-data:type=\"'json'\"\n        v-download-data:filename=\"'cdqa-v1.1.json'\"\n      >Download</b-button>\n    </div>\n  </div>\n</template>\n\n<script>\n\nconst uuidv4 = require('uuid/v4');\n\nexport default {\n  name: \"AnnotationsPage\",\n  props: [\"json\"],\n  data: function() {\n    return {\n      data_number: 1,\n      context_number: 1,\n      question: \"\",\n      answer: \"\",\n      fields: [\"Questions\", \"Answers\", \"Edit\"],\n      query: \"\"\n    };\n  },\n  methods: {\n    addAnnotation: function() {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\n        this.context_number - 1\n      ];\n      var qa = {\n        question: this.question,\n        id: uuidv4(),\n        answers: [{ answer_start: this.answer_start, text: this.answer }]\n      };\n      paragraph_container.qas.push(qa);\n      this.question = \"\";\n      this.answer = \"\";\n    },\n    deleteAnnotation: function(row_index) {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\n        this.context_number - 1\n      ];\n      paragraph_container.qas.splice(row_index, 1);\n    },\n    getSelection: function(fixStr) {\n      this.answer = fixStr;\n    },\n    delete_paragraph: function() {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs;\n      paragraph_container.splice([this.context_number - 1], 1);\n    },\n    delete_empty_document: function() {\n      for (var i in this.json.data) {\n        if (this.json.data[i].paragraphs.length == 0) {\n          this.json.data.splice(i, 1);\n        }\n      }\n    }\n  },\n  computed: {\n    valid_json: function() {\n      var json = JSON.stringify(this.json).replace(/[\\u007F-\\uFFFF]/g, function(\n        chr\n      ) {\n        return \"\\\\u\" + (\"0000\" + chr.charCodeAt(0).toString(16)).substr(-4);\n      });\n      return json;\n    },\n    autocomplete: function() {\n      var idx = [];\n      for (var i = 0; i < this.json.data.length; i++) {\n        idx.push(this.json.data[i].title);\n      }\n      return idx;\n    },\n    items: function() {\n      var paragraph_container = this.json.data[this.data_number - 1].paragraphs[\n        this.context_number - 1\n      ];\n      var items = [];\n      for (var i = 0; i < paragraph_container.qas.length; i++) {\n        var item = {\n          Questions: paragraph_container.qas[i].question,\n          Answers: paragraph_container.qas[i].answers[0].text\n        };\n        items.push(item);\n      }\n      return items;\n    },\n    paragraph_context: function() {\n      return this.json.data[this.data_number - 1].paragraphs[\n        this.context_number - 1\n      ].context;\n    },\n    answer_start: function() {\n      return this.paragraph_context.indexOf(this.answer);\n    },\n    options() {\n      return {\n        radius: 15,\n        circleLineCap: \"round\",\n        varyStrokeArray: [1, 2],\n        pathColors: [\"lightgrey\", \"rgb(40, 167, 69)\"],\n        text: function(value) {\n          return (\n            this.htmlifyNumber(value) + '<span style=\"font-size: 1em;\">%</span>'\n          );\n        },\n        textColor: \"black\"\n      };\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n"],"sourceRoot":"src/components"}]}